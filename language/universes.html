<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Universes - Pikelet Language Book</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Documentation for the Pikelet Language">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "../";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="../index.html">Pikelet</a></li><li><a href="../installation/index.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li><a href="../language/index.html"><strong aria-hidden="true">2.</strong> Language</a></li><li><ol class="section"><li><a href="../language/conditionals.html"><strong aria-hidden="true">2.1.</strong> Conditionals</a></li><li><a href="../language/functions.html"><strong aria-hidden="true">2.2.</strong> Functions</a></li><li><a href="../language/records.html"><strong aria-hidden="true">2.3.</strong> Records</a></li><li><a href="../language/bindings.html"><strong aria-hidden="true">2.4.</strong> Bindings</a></li><li><a href="../language/type-inference.html"><strong aria-hidden="true">2.5.</strong> Type inference</a></li><li><a href="../language/universes.html" class="active"><strong aria-hidden="true">2.6.</strong> Universes</a></li></ol></li><li><a href="../appendix/index.html"><strong aria-hidden="true">3.</strong> Appendix</a></li><li><ol class="section"><li><a href="../appendix/design.html"><strong aria-hidden="true">3.1.</strong> Design</a></li><li><a href="../appendix/theory.html"><strong aria-hidden="true">3.2.</strong> Theory</a></li><li><a href="../appendix/influences.html"><strong aria-hidden="true">3.3.</strong> Influences</a></li><li><a href="../appendix/references.html"><strong aria-hidden="true">3.4.</strong> References</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Pikelet Language Book</h1> 

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#universes" id="universes"><h1>Universes</h1></a>
<a class="header" href="#contents" id="contents"><h2>Contents</h2></a>
<ul>
<li><a href="#types-of-types">Types of types</a></li>
<li><a href="#cumulativity">Cumulativity</a></li>
<li><a href="#syntactic-sugar">Syntactic sugar</a></li>
<li><a href="#shifting-universes">Shifting universes</a></li>
</ul>
<a class="header" href="#types-of-types" id="types-of-types"><h2>Types of types</h2></a>
<p>Types also have types!</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; :t S32
Type
</code></pre>
<p>We call this special 'type of types' a <em>universe</em>.</p>
<p>You might then wonder, “what is the type of <code>Type</code>?” That's a good question!
Clever people have figured out that if <code>Type</code> was its own type, ie. <code>Type : Type</code>,
it would lead situations like <a href="https://en.wikipedia.org/wiki/Girard%27s_paradox">Girard's paradox</a>, (the type
theory equivalent of the more well-known <a href="https://en.wikipedia.org/wiki/Russell%27s_paradox">Russel's paradox</a> in
set theory). There is nothing worse than paradoxes in a type system, so instead
we create ourselves a new universe called <code>Type^1</code>:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; :t Type
Type^1
</code></pre>
<p>We keep on going like this, giving us a hierarchy of <em>universes</em>, as many
as we need for a given program:</p>
<pre><code class="language-pikelet">Type : Type^1 : Type^2 : Type^3 : ...
</code></pre>
<p>We call the number given to each universe the <em>level</em> of that universe. You can
think of these universes as larger and larger collections of things, with the
smaller universes being contained within the larger universes:</p>
<pre><code>.- Type^2 -----------------------------------------------------------------------.
|                                                    Array n Type^1              |
|                                                                                |
|  .- Type^1 -----------------------------------------------------------------.  |
|  |                                                                          |  |
|  |  .- Type -------------------------------.                                |  |
|  |  |                Array n String        |                                |  |
|  |  |                                      |                                |  |
|  |  |            Record { x : F32 }        |          Array n Type          |  |
|  |  |                                      |                                |  |
|  |  |  .- S32 --------------.              |                                |  |
|  |  |  | ..., -1, 0, 1, ... |              |       Nat -&gt; Type -&gt; Type      |  |
|  |  |  '--------------------'              |                                |  |
|  |  |                                      |                                |  |
|  |  |  .- Record {} -.   .- Bool -------.  |                                |  |
|  |  |  |  record {}  |   |  true, false |  |          Type -&gt; Type          |  |
|  |  |  '-------------'   '--------------'  |                                |  |
|  |  |                                      |                                |  |
|  |  |  .- String ----------------------.   |  .- Record { t : Type } ----.  |  |
|  |  |  | &quot;hello&quot;, &quot;byee!&quot;, &quot;hoho&quot;, ... |   |  |  record { t = String },  |  |  |
|  |  |  '-------------------------------'   |  |  record { t = U32 }, ... |  |  |
|  |  '--------------------------------------'  '--------------------------'  |  |
|  '--------------------------------------------------------------------------'  |
'--------------------------------------------------------------------------------'
</code></pre>
<p>Note that in most regular programming you will rarely see anything above <code>Type</code>,
and even more rarely still will you see things above <code>Type^1</code>, so all of this might
seem a little excessive. That being said, we believe it is important enough to
plug this gap in our type system while we have the chance.</p>
<a class="header" href="#cumulativity" id="cumulativity"><h2>Cumulativity</h2></a>
<p>Because the level of a universe corresponds to some notion of it's 'size', this
suggests that larger universes should be able to contain all the other things
smaller than themselves. This is reflected in Pikelet too:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; Bool : Type        -- ok
Pikelet&gt; Bool : Type^2      -- ok
Pikelet&gt; Type^1 : Type^3    -- ok
Pikelet&gt; Type^3 : Type^1    -- error!
</code></pre>
<a class="header" href="#syntactic-sugar" id="syntactic-sugar"><h2>Syntactic sugar</h2></a>
<p>Note that <code>Type</code> is actually just sugar for <code>Type^0</code>:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; :t Type^0
Type^1
</code></pre>
<a class="header" href="#shifting-universes" id="shifting-universes"><h2>Shifting universes</h2></a>
<p>Often we'll write definitions in terms of <code>Type</code>, without worrying about the
universe levels. For example the identity function can be defined with a type
parameter in the universe of <code>Type</code>:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; :let id = \(a : Type) (x : a) =&gt; x
id : (a : Type) (x : a) -&gt; a
</code></pre>
<p>This then allows us to use it with values:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; id String &quot;hello&quot;   -- ok
Pikelet&gt; id S32 1            -- ok
</code></pre>
<p>Sadly because of our universe hierarchy, we can't use our identity function at
the type level!</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; id Type String                 -- error!
Pikelet&gt; id ((a : Type) -&gt; a -&gt; a) id   -- error!
Pikelet&gt; id Type^1 Type                 -- error!
</code></pre>
<p>This would seem like it would be terrible for code reuse - you would need to
create a new <code>id</code> function for every universe level! Thankfully we have a simple
solution: We allow identifiers to be <em>shifted</em> to the correct universe level
using the <code>^</code> notation. This shifts the given definition to the desired universe
level:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; :t id^1
(a : Type^1) -&gt; a -&gt; a
</code></pre>
<p>We can then use the shifted identity functions like so:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; id^1 Type String                    -- ok
Pikelet&gt; id^1 ((a : Type) -&gt; a -&gt; a) id      -- ok
Pikelet&gt; id^2 Type^1 Type                    -- ok
</code></pre>
<p>Field projections can also have shifts applied to them:</p>
<pre><code class="language-pikelet-repl">Pikelet&gt; prelude.id^1 Type String
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../language/type-inference.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../appendix/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../language/type-inference.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../appendix/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
